{% extends "base.html" %}
{% block content %}

<div class="container mt-5 mb-5">

    <h2 class="text-center fw-bold">Explore Opportunities</h2>

    <p class="text-center text-muted mt-2">
        Preview verified opportunities
    </p>

    <div class="row mt-4 g-4">

        {% for op in opportunities %}

        <div class="col-md-4">

            <div class="card h-100">

                <h5 class="fw-bold">{{ op.title }}</h5>

                <p class="text-muted mb-1">
                    {{ op.opportunity_type }}
                </p>

                <p class="small">
                    {{ op.description[:100] }}...
                </p>

                <p>
                    <strong>Skills:</strong> {{ op.skills }}
                </p>

                <p>
                    <strong>Duration:</strong> {{ op.duration }}
                </p>

                <span class="badge bg-success mb-2">
                    {{ op.paid }}
                </span>

                {% if current_user.is_authenticated and current_user.role == "student" %}

                    <a href="/apply/{{ op.id }}"
                       class="btn btn-info w-100">
                       Apply
                    </a>

                {% elif current_user.is_authenticated and current_user.role == "company" %}

                    <button class="btn btn-secondary w-100" disabled>
                        Companies cannot apply
                    </button>

                {% else %}

                    <a href="/login"
                       class="btn btn-secondary w-100">
                       Login to Apply
                    </a>

                {% endif %}

            </div>

        </div>

        {% endfor %}

    </div>

</div>

{% endblock %}